@{
	Layout = "_Layout_Tecnico";
}
<link rel="stylesheet" href="~/css/tecnicocss/mistareas.css" />
<div class="container-fluid">
    <div class="row">

        <!-- Main content -->
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4 main-content">
            <!-- Header -->
            <div class="dashboard-header mb-4">
                <h2 class="dashboard-title">Mis Tareas</h2>
                <p class="dashboard-subtitle">Gestiona y revisa tus tareas asignadas</p>
            </div>

            <!-- Tasks Section -->
            <div class="tasks-section pending-section">
                <div class="section-header">
                    <h3 class="section-title">
                        <span data-feather="clipboard"></span>
                        Tareas Asignadas
                    </h3>
                    <div class="task-counter">
                        <span class="counter-badge">@{
                                var taskCount = ((IEnumerable<dynamic>)ViewData["MisTareas"]).Count();
                            }@taskCount</span>
                    </div>
                </div>

                <!-- Table Header -->
                <div class="table-header">
                    <div class="header-cell header-ticket">
                        <span data-feather="hash"></span>
                        Ticket
                    </div>
                    <div class="header-cell header-problem">
                        <span data-feather="alert-circle"></span>
                        Problema General
                    </div>
                    <div class="header-cell header-date">
                        <span data-feather="calendar"></span>
                        Fecha de la Tarea
                    </div>
                    <div class="header-cell header-status">
                        <span data-feather="activity"></span>
                        Estado
                    </div>
                    <div class="header-cell header-priority">
                        <span data-feather="flag"></span>
                        Prioridad
                    </div>
                    <div class="header-cell header-actions">
                        <span data-feather="settings"></span>
                        Acciones
                    </div>
                </div>

                <!-- Tasks List -->
                <div class="tasks-list">
                    @foreach (var tarea in (IEnumerable<dynamic>)ViewData["MisTareas"])
                    {
                        <div class="task-row">
                            <!-- ID -->
                            <div class="task-cell task-ticket">
                                <div class="ticket-badge">
                                    #@tarea.ticketID
                                </div>
                            </div>

                            <!-- Info del tarea -->
                            <div class="task-cell task-problem">
                                <h6 class="task-description">@tarea.Des</h6>
                            </div>

                            <!-- Fecha -->
                            <div class="task-cell task-date">
                                <div class="date-container">
                                    <span class="date-text">@tarea.Fecha.ToString("dd/MM/yyyy")</span>
                                    <span class="time-text">@tarea.Fecha.ToString("HH:mm")</span>
                                </div>
                            </div>

                            <!-- Estado -->
                            <div class="task-cell task-status">
                                <span class="status-badge status-@tarea.Estado.ToLower().Replace(" ", "-")" title="@tarea.Estado">
                                    @tarea.Estado
                                </span>
                            </div>


                            <!-- Prioridad -->
                            <div class="task-cell task-priority">
                                <span class="priority-badge priority-@tarea.Prioridad.ToLower()">@tarea.Prioridad</span>
                            </div>

                            <!-- Acciones -->
                            <div class="task-cell task-actions">
                                <form asp-action="Detalles" method="post" class="task-form">
                                    <input type="hidden" name="id" value="@tarea.ID" />
                                    <button type="submit" class="btn-view-details">
                                        <span data-feather="eye"></span>
                                        Ver
                                    </button>
                                </form>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </main>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Initialize feather icons
        if (typeof feather !== 'undefined') {
            feather.replace();
        }
    });
</script>
<style>
    .status-badge {
        display: inline-block;
        font-size: 12px; /* Tamaño de texto más pequeño */
        padding: 4px 8px; /* Menos espacio interno */
        max-width: 140px; /* Limita el ancho */
        white-space: nowrap; /* Evita saltos de línea */
        overflow: hidden; /* Oculta lo que se pasa */
        text-overflow: ellipsis; /* Muestra "..." si el texto es muy largo */
        border-radius: 4px;
        background-color: #eee; /* Puedes personalizar esto */
        color: #333;
    }

</style>
